#
# Reun Media Astro moon tasks
#
# Requires following packages for full functionality:
#
# See also `.moon/tasks/bun.yml` and `.moon/tasks/typescript.yml`
#

$schema: "../../cache/schemas/tasks.json"

tasks:
  lint:
    deps:
      - typecheck
      - eslint
      - lintPkgJson
      - format

  typecheck:
    command: "astro check"
    inputs:
      - "@group(sources)"
      - "@group(configs)"

  build:
    command: "astro build"
    inputs:
      - "@group(sources)"
      - "@group(configs)"
    outputs:
      - "dist/*"
    deps:
      - format
      - lint
      - test

  dev:
    command: "astro dev"

  preview:
    command: "astro preview"
